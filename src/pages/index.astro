---
import Proyectos from '../components/Proyectos/Proyectos.astro';
import Layout from '../layouts/Layout.astro';
import Carrusel from '../components/Carrusel/Carrusel.astro';
import Actividades from '../components/actividades_investigacion/Actividades.astro';
import Noticias from '../components/Noticias/Noticias.astro';
import type {NavBarProps} from "../types/types.ts" 
// Ejemplo con datos dinámicos (desde API, CMS, etc.)

// Simular datos desde una API o CMS
const fetchNews = async () => {
  // En un caso real, esto podría ser una llamada a tu API o CMS
  return [
    {
      id: 1,
      titulo: 'UNEV celebra simposio sobre economía circular',
imagen: '/imagenes/unev-simposio.jpeg',
      categoria: 'NOTICIA',
      fecha: '2025-07-15'
    },
    {
      id: 2,
      titulo: 'UNEV reconoce a 27 docentes destacados',
imagen: '/imagenes/docentes-unev.jpg',
      categoria: 'RECONOCIMIENTO',
      fecha: '2025-07-10'
    }
  ];
};

// Obtener los datos
const noticias = await fetchNews();

// Transformar los datos al formato que espera el carousel
const slides = noticias.map(noticia => ({
  id: noticia.id,
  image: noticia.imagen,
  title: noticia.titulo,
  label: noticia.categoria,
  alt: `Imagen de ${noticia.titulo}`
}));

const customStyle: NavBarProps = {
navBarStyle: `
#navbar {
 height: 0px;
  background-color: rgba(255, 255, 255, 0.95);
}
.nav-link{
  color:  rgba(255, 255, 255, 0.7);
}
#navbar:has(.desktop-nav:hover) {
      height: 78px;
      background-color: rgba(255, 255, 255, 0.95);
    }
  
#navbar:has(.nav-item:hover) .nav-link {
      color: black;
    }
`}
---

<Layout customStyle={customStyle}>
    <Carrusel 
        slides={slides} 
        height="70vh" 
        autoplay={true} 
        autoplayDelay={5000} 
  />
 
  <Actividades/>
  <Proyectos/>
  <Noticias/>
</Layout>
